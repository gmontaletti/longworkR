% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/career_metrics.R
\name{calculate_career_quality_metrics}
\alias{calculate_career_quality_metrics}
\title{Calculate Career Quality Metrics Using Survival Analysis}
\usage{
calculate_career_quality_metrics(
  data,
  survival_data = NULL,
  id_column = "cf",
  time_period_column = NULL,
  contract_code_column = "COD_TIPOLOGIA_CONTRATTUALE",
  employment_intensity_column = "prior",
  min_spell_duration = 7
)
}
\arguments{
\item{data}{A data.table containing employment records with required columns:
\code{durata} (contract duration), \code{over_id} (employment period ID),
and columns specified by other parameters}

\item{survival_data}{Required. Pre-computed survival analysis results from
\code{estimate_contract_survival_optimized()} containing a named vector
\code{median_survival} with median survival times by contract type.
Expected structure: \code{list(median_survival = c("A.01.00" = 365, "A.03.00" = 180, ...))}
This parameter is mandatory as the function relies exclusively on survival data.}

\item{id_column}{Character. Name of person identifier column. Default: "cf"}

\item{time_period_column}{Character. Optional column for grouping by time periods.
If NULL, analyzes entire career trajectory. Default: NULL}

\item{contract_code_column}{Character. Column containing contract type codes. Default: "COD_TIPOLOGIA_CONTRATTUALE"}

\item{employment_intensity_column}{Character. Column indicating employment intensity (prior).
Values >= 1 indicate full-time employment, 0 indicates part-time. Default: "prior"}

\item{min_spell_duration}{Numeric. Minimum duration (days) to include in analysis. Default: 7}
}
\value{
A data.table with comprehensive quality metrics:
\item{cf}{Person identifier}
\item{time_period}{Time period (if time_period_column provided)}
\item{total_employment_days}{Total days in employment}
\item{fulltime_employment_days}{Days in full-time employment (prior >= 1)}
\item{parttime_employment_days}{Days in part-time employment (prior == 0)}
\item{fulltime_employment_rate}{Proportion of employment in full-time (0-1 scale)}
\item{high_quality_contract_days}{Days in high-quality contracts (survival score > 0.7)}
\item{high_quality_fulltime_days}{Days in high-quality AND full-time contracts}
\item{high_quality_fulltime_rate}{Proportion of employment in high-quality full-time contracts}
\item{contract_quality_score}{Duration-weighted average contract quality (0-1 scale)}
\item{employment_intensity_score}{Duration-weighted average employment intensity (0-1 scale)}
\item{composite_quality_index}{Weighted combination: 60\% contract quality + 40\% intensity (0-1 scale)}
#'
}
\description{
Calculates comprehensive career quality metrics based exclusively on survival analysis
results combined with employment intensity (full-time vs part-time). This data-driven
approach provides objective career quality assessment without relying on predefined
contract type hierarchies.
}
\details{
The function computes career quality using empirical survival analysis results.
Contract quality scores are derived exclusively from survival data:

\strong{Survival-Based Scoring:}
\itemize{
\item Contract quality scores are based on median survival times from survival analysis
\item Longer median survival times indicate higher contract quality
\item Scores are normalized to a 0-1 scale with a minimum quality floor of 0.1
\item Contract types not present in survival data receive a default moderate score (0.5)
\item High-quality contracts are defined as those with quality scores > 0.7
}

The composite quality index combines contract quality (60\% weight) with employment
intensity (40\% weight), where full-time employment (prior >= 1) contributes more
to career quality than part-time employment.
}
\examples{
\dontrun{
# Load sample employment data
employment_data <- readRDS("data/sample.rds")

# Example 1: Career quality analysis with survival data (required)
survival_results <- estimate_contract_survival_optimized(
  data = employment_data,
  contract_type_var = "COD_TIPOLOGIA_CONTRATTUALE",
  duration_var = "durata",
  censored_var = "censored"
)

career_quality <- calculate_career_quality_metrics(
  data = employment_data,
  survival_data = survival_results
)

# View results
print(career_quality[, .(cf, composite_quality_index, 
                         fulltime_employment_rate, contract_quality_score)])

# Example 2: Time-period analysis (e.g., by year)
employment_data[, year := year(inizio)]
yearly_quality <- calculate_career_quality_metrics(
  data = employment_data,
  survival_data = survival_results,
  time_period_column = "year"
)

# Example 3: Custom parameters and minimum spell duration
custom_quality <- calculate_career_quality_metrics(
  data = employment_data,
  survival_data = survival_results,
  contract_code_column = "contract_type",
  employment_intensity_column = "intensity",
  min_spell_duration = 30  # Only include spells of 30+ days
)
}

}
\seealso{
\code{\link{estimate_contract_survival_optimized}} for survival analysis computation,
\code{\link{calculate_career_transition_metrics}} for analyzing career transitions,
\code{\link{calculate_comprehensive_career_metrics}} for integrated career analysis
}
